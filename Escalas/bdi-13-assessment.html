<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventario de Depresión de Beck 13 (BDI-13)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #29A98C 0%, #112F33 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 900px;
            overflow: hidden;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header {
            background: linear-gradient(135deg, #29A98C 0%, #112F33 100%);
            color: #FFF8EE;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .progress-container {
            background: rgba(255,248,238,0.2);
            border-radius: 10px;
            height: 8px;
            margin-top: 20px;
            overflow: hidden;
        }

        .progress-bar {
            background: #FFF8EE;
            height: 100%;
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .content {
            padding: 40px;
        }

        .question-container {
            text-align: center;
            margin-bottom: 30px;
        }

        .question-intro {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .question-number {
            font-size: 0.9rem;
            font-weight: 500;
            color: #29A98C;
            margin-bottom: 25px;
            opacity: 0.8;
        }

        .options {
            display: grid;
            gap: 12px;
            margin-bottom: 30px;
            text-align: left;
        }

        .option-button {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 22px 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            font-weight: 500;
            text-align: left;
            position: relative;
            overflow: hidden;
            line-height: 1.5;
        }

        .option-button:hover {
            border-color: #29A98C;
            background: #f0fff8;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(41, 169, 140, 0.2);
        }

        .option-button.selected {
            background: #29A98C;
            color: #FFF8EE;
            border-color: #29A98C;
        }

        .results-container {
            text-align: center;
        }

        .score-display {
            background: linear-gradient(135deg, #29A98C 0%, #112F33 100%);
            color: #FFF8EE;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .score-number {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .score-interpretation {
            font-size: 1.3rem;
            opacity: 0.9;
        }

        .red-flags-section {
            background: #fff5f5;
            border: 2px solid #EC7367;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            text-align: left;
        }

        .red-flags-title {
            color: #EC7367;
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .red-flag-item {
            background: white;
            border: 1px solid #EC7367;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
        }

        .red-flag-header {
            display: flex;
            justify-content: between;
            align-items: flex-start;
            gap: 15px;
        }

        .red-flag-text {
            flex: 1;
            color: #2d3748;
            line-height: 1.5;
        }

        .red-flag-score {
            background: #FFF8EE;
            color: #EC7367;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            white-space: nowrap;
            border: 1px solid #EC7367;
        }

        .suicide-risk-warning {
            background: #FFF8EE;
            border: 3px solid #EC7367;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            text-align: center;
        }

        .suicide-risk-title {
            color: #EC7367;
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .no-red-flags {
            background: #f0fff8;
            border: 2px solid #29A98C;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            text-align: center;
            color: #112F33;
        }

        .button {
            background: linear-gradient(135deg, #29A98C 0%, #112F33 100%);
            color: #FFF8EE;
            border: none;
            border-radius: 12px;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(41, 169, 140, 0.3);
        }

        .doctor-view {
            background: #f7fafc;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .patient-view-message {
            text-align: center;
            padding: 40px;
        }

        .checkmark {
            width: 80px;
            height: 80px;
            background: #29A98C;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2rem;
            color: #FFF8EE;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
            }
            
            .content {
                padding: 20px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 1.5rem;
            }
            
            .option-button {
                padding: 15px;
                font-size: 0.95rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 id="headerTitle">Inventario de Depresión de Beck 13</h1>
            <p id="headerSubtitle">Evaluación de síntomas depresivos</p>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
        </div>
        
        <div class="content" id="mainContent">
            <!-- El contenido se generará dinámicamente -->
        </div>
    </div>

    <script>
        class BDI13Assessment {
            constructor() {
                this.currentQuestion = 0;
                this.responses = {};
                this.showResults = false;
                this.showDoctorView = false;
                
                this.questions = [
                    [
                        "No me encuentro triste",
                        "Me siento triste o melancólico",
                        "Constantemente estoy melancólico o triste y no puedo superarlo",
                        "Me siento tan triste o infeliz que no puedo resistirlo"
                    ],
                    [
                        "No soy particularmente pesimista y no me encuentro desalentado respecto al futuro",
                        "Me siento desanimado respecto al futuro",
                        "No tengo nada que esperar del futuro",
                        "No tengo ninguna esperanza en el futuro y creo que las cosas no pueden mejorar"
                    ],
                    [
                        "No me siento fracasado",
                        "Creo que he fracasado más que la mayoría de las personas",
                        "Cuando miro hacia atrás en mi vida, todo lo que veo son un montón de fracasos",
                        "Creo que como persona soy un completo fracasado (padre, marido, esposa)"
                    ],
                    [
                        "No estoy particularmente descontento",
                        "No disfruto de las cosas como antes",
                        "No encuentro satisfacción en nada",
                        "Me siento descontento de todo"
                    ],
                    [
                        "No me siento particularmente culpable",
                        "Me siento malo o indigno muchas veces",
                        "Me siento culpable",
                        "Pienso que soy muy malo e indigno"
                    ],
                    [
                        "No me siento decepcionado conmigo mismo",
                        "Estoy decepcionado conmigo mismo",
                        "Estoy disgustado conmigo mismo",
                        "Me odio"
                    ],
                    [
                        "No tengo pensamientos de dañarme",
                        "Creo que estaría mejor muerto",
                        "Tengo planes precisos para suicidarme",
                        "Me mataría si tuviera ocasión"
                    ],
                    [
                        "No he perdido el interés por los demás",
                        "Estoy menos interesado en los demás que antes",
                        "He perdido la mayor parte del interés por los demás y pienso poco en ellos",
                        "He perdido todo el interés por los demás y no me importa en absoluto"
                    ],
                    [
                        "Tomo mis decisiones con la misma facilidad que antes",
                        "Trato de no tener que tomar decisiones",
                        "Tengo grandes dificultades para tomar decisiones",
                        "Ya no puedo tomar decisiones"
                    ],
                    [
                        "No creo que mi aspecto haya empeorado",
                        "Estoy preocupado porque me veo viejo y poco atractivo",
                        "Creo que mi aspecto empeora constantemente quitándome atractivo",
                        "Siento que mi aspecto es feo y repulsivo"
                    ],
                    [
                        "Puedo trabajar igual de bien que antes",
                        "Me cuesta un esfuerzo especial comenzar a hacer algo",
                        "Debo esforzarme mucho para hacer cualquier cosa",
                        "No puedo realizar ningún trabajo"
                    ],
                    [
                        "No me canso más que antes",
                        "Me canso más fácilmente que antes",
                        "Me canso por cualquier cosa",
                        "Me canso demasiado por hacer cualquier cosa"
                    ],
                    [
                        "Mi apetito no es peor de lo normal",
                        "Mi apetito no es tan bueno como antes",
                        "Mi apetito es ahora mucho peor",
                        "He perdido el apetito"
                    ]
                ];
                
                this.questionTitles = [
                    "Tristeza", "Pesimismo", "Sentimiento de fracaso", "Insatisfacción",
                    "Sentimiento de culpabilidad", "Autodecepción", "Pensamientos suicidas",
                    "Pérdida de interés social", "Indecisión", "Cambios en la imagen corporal",
                    "Dificultades laborales", "Fatiga", "Pérdida de apetito"
                ];
                
                this.init();
            }
            
            init() {
                this.updateProgress();
                this.renderCurrentState();
            }
            
            updateProgress() {
                const progress = ((this.currentQuestion + 1) / this.questions.length) * 100;
                document.getElementById('progressBar').style.width = progress + '%';
            }
            
            renderCurrentState() {
                if (!this.showResults) {
                    this.renderQuestion();
                } else if (!this.showDoctorView) {
                    this.renderPatientResults();
                } else {
                    this.renderDoctorResults();
                }
            }
            
            renderQuestion() {
                const content = document.getElementById('mainContent');
                const currentQuestionOptions = this.questions[this.currentQuestion];
                
                content.innerHTML = `
                    <div class="question-container">
                        <p class="question-intro">
                            Lea íntegro el grupo de afirmaciones y escoja la que mejor describa el modo en que se siente actualmente:
                        </p>
                        <div class="question-number">
                            ${this.currentQuestion + 1}
                        </div>
                    </div>
                    
                    <div class="options">
                        ${currentQuestionOptions.map((option, index) => `
                            <button class="option-button" onclick="assessment.handleResponse(${index})">
                                ${option}
                            </button>
                        `).join('')}
                    </div>
                `;
                
                document.getElementById('headerSubtitle').textContent = 
                    `Pregunta ${this.currentQuestion + 1} de ${this.questions.length}`;
            }
            
            renderPatientResults() {
                document.getElementById('headerTitle').textContent = 'Cuestionario Completado';
                document.getElementById('headerSubtitle').textContent = 'Gracias por completar el BDI-13';
                
                const content = document.getElementById('mainContent');
                content.innerHTML = `
                    <div class="patient-view-message">
                        <div class="checkmark">✓</div>
                        <h2 style="font-size: 1.5rem; margin-bottom: 15px; color: #2d3748;">
                            Por favor, pase el dispositivo al médico para su revisión
                        </h2>
                        <p style="color: #666; margin-bottom: 30px; font-size: 1.1rem;">
                            Su información ha sido registrada correctamente
                        </p>
                        <button class="button" onclick="assessment.showDoctorResults()">
                            🩺 Revisar Resultados (Médico)
                        </button>
                    </div>
                `;
            }
            
            renderDoctorResults() {
                document.getElementById('headerTitle').textContent = 'Resultados BDI-13 - Vista Médica';
                document.getElementById('headerSubtitle').textContent = 'Análisis profesional de depresión';
                
                const totalScore = this.calculateTotal();
                const interpretation = this.getInterpretation(totalScore);
                const redFlags = this.getRedFlags();
                const hasSuicideRisk = this.responses[6] > 0; // Ítem 7: Pensamientos suicidas
                
                const content = document.getElementById('mainContent');
                content.innerHTML = `
                    <div class="doctor-view">
                        <div class="score-display">
                            <div class="score-number">${totalScore}/39</div>
                            <div class="score-interpretation">${interpretation}</div>
                        </div>
                        
                        ${hasSuicideRisk ? `
                            <div class="suicide-risk-warning">
                                <h3 class="suicide-risk-title">
                                    ⚠️ ALERTA: Riesgo Suicida Detectado
                                </h3>
                                <p style="font-size: 1.1rem; color: #EC7367;">
                                    <strong>El paciente ha reportado pensamientos suicidas. Se requiere evaluación inmediata y seguimiento especializado.</strong>
                                </p>
                            </div>
                        ` : ''}
                        
                        ${redFlags.length > 0 ? `
                            <div class="red-flags-section">
                                <h3 class="red-flags-title">
                                    🚩 Síntomas Significativos (Puntuación ≥ 2)
                                </h3>
                                ${redFlags.map(item => `
                                    <div class="red-flag-item">
                                        <div class="red-flag-header">
                                            <div class="red-flag-text">
                                                <strong>${item.title}:</strong><br>
                                                ${item.selectedResponse}
                                            </div>
                                            <div class="red-flag-score">
                                                Nivel ${item.score}
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        ` : `
                            <div class="no-red-flags">
                                <p><strong>✅ No hay síntomas reportados como significativos (puntuación ≥ 2)</strong></p>
                            </div>
                        `}
                        
                        <div style="text-align: center;">
                            <button class="button" onclick="assessment.resetTest()">
                                🔄 Nuevo Cuestionario
                            </button>
                        </div>
                    </div>
                `;
            }
            
            handleResponse(value) {
                this.responses[this.currentQuestion] = value;
                
                // Efecto visual de selección
                const buttons = document.querySelectorAll('.option-button');
                buttons.forEach((btn, index) => {
                    if (index === value) {
                        btn.classList.add('selected');
                    }
                });
                
                // Avanzar después de una pausa
                setTimeout(() => {
                    if (this.currentQuestion < this.questions.length - 1) {
                        this.currentQuestion++;
                        this.updateProgress();
                        this.renderCurrentState();
                    } else {
                        this.showResults = true;
                        this.renderCurrentState();
                    }
                }, 1000);
            }
            
            showDoctorResults() {
                this.showDoctorView = true;
                this.renderCurrentState();
            }
            
            resetTest() {
                this.currentQuestion = 0;
                this.responses = {};
                this.showResults = false;
                this.showDoctorView = false;
                
                document.getElementById('headerTitle').textContent = 'Inventario de Depresión de Beck 13';
                document.getElementById('headerSubtitle').textContent = 'Evaluación de síntomas depresivos';
                
                this.init();
            }
            
            calculateTotal() {
                return Object.values(this.responses).reduce((sum, value) => sum + value, 0);
            }
            
            getInterpretation(score) {
                if (score >= 0 && score <= 4) return "Depresión mínima";
                if (score >= 5 && score <= 7) return "Depresión leve";
                if (score >= 8 && score <= 15) return "Depresión moderada";
                if (score >= 16) return "Depresión severa";
                return "";
            }
            
            getRedFlags() {
                const redFlags = [];
                
                Object.keys(this.responses).forEach(questionIndex => {
                    const score = this.responses[questionIndex];
                    if (score >= 2) { // Puntuación significativa
                        const questionNum = parseInt(questionIndex);
                        redFlags.push({
                            title: this.questionTitles[questionNum],
                            score: score,
                            selectedResponse: this.questions[questionNum][score],
                            isSuicidal: questionNum === 6 // Ítem 7: Pensamientos suicidas
                        });
                    }
                });
                
                return redFlags.sort((a, b) => {
                    // Priorizar riesgo suicida
                    if (a.isSuicidal && !b.isSuicidal) return -1;
                    if (!a.isSuicidal && b.isSuicidal) return 1;
                    // Luego por puntuación
                    return b.score - a.score;
                });
            }
        }
        
        // Inicializar la aplicación
        const assessment = new BDI13Assessment();
    </script>
</body>
</html>